{
  "name": "openid",
  "description": "OpenID 1.1/2.0 library for node.js",
  "keywords": [
    "openid",
    "auth",
    "authentication",
    "identity",
    "identifier",
    "relying",
    "party",
    "1.1",
    "2.0",
    "library"
  ],
  "author": {
    "name": "HÃ¥vard Stranden",
    "email": "havard.stranden@gmail.com",
    "url": "http://ox.no"
  },
  "version": "0.4.2",
  "repository": {
    "type": "git",
    "url": "http://github.com/havard/node-openid.git"
  },
  "bugs": "http://github.com/havard/node-openid/issues",
  "licenses": [
    {
      "type": "MIT",
      "url": "http://github.com/havard/node-openid/raw/master/LICENSE"
    }
  ],
  "directories": {
    "lib": "./lib"
  },
  "main": "./openid.js",
  "engines": [
    "node >= 0.6.0"
  ],
  "readme": "# OpenID for node.js\n\nOpenID for node.js is (yes, you guessed it) an OpenID implementation for node.js. \n\nHighlights and features include:\n\n- Full OpenID 1.0/1.1/2.0 compliant Relying Party (client) implementation\n- Very simple API\n- Simple extension points for association state\n\n## Download\n\nThe library can be [reviewed and retrieved from GitHub](http://github.com/havard/node-openid).\n\n## Installation\n\nIf you use [`npm`](http://npmjs.org), simply do `npm install openid`.\n\nOtherwise, you can grab the code from [GitHub](https://github.com/havard/node-openid) \nand \n\n## Examples\n\nInstead of walking through step-by-step, here's a very simple server \nusing OpenID for node.js for authentication:\n\n```javascript\nvar openid = require('openid');\nvar url = require('url');\nvar querystring = require('querystring');\nvar relyingParty = new openid.RelyingParty(\n    'http://example.com/verify', // Verification URL (yours)\n    null, // Realm (optional, specifies realm for OpenID authentication)\n    false, // Use stateless verification\n    false, // Strict mode\n    []); // List of extensions to enable and include\n\n\nvar server = require('http').createServer(\n    function(req, res)\n    {\n        var parsedUrl = url.parse(req.url);\n        if(parsedUrl.pathname == '/authenticate')\n        { \n          // User supplied identifier\n          var query = querystring.parse(parsedUrl.query);\n          var identifier = query.openid_identifier;\n\n          // Resolve identifier, associate, and build authentication URL\n          relyingParty.authenticate(identifier, false, function(error, authUrl)\n              {\n                if (error)\n                {\n                  res.writeHead(200);\n                  res.end('Authentication failed: ' + error);\n                }\n                else if (!authUrl)\n                {\n                  res.writeHead(200);\n                  res.end('Authentication failed');\n                }\n                else\n                {\n                  res.writeHead(302, { Location: authUrl });\n                  res.end();\n                }\n              });\n        }\n        else if(parsedUrl.pathname == '/verify')\n        {\n            // Verify identity assertion\n            // NOTE: Passing just the URL is also possible\n            relyingParty.verifyAssertion(req, function(error, result)\n            {\n              res.writeHead(200);\n              res.end(!error && result.authenticated \n                  ? 'Success :)'\n                  : 'Failure :(');\n            });\n        }\n        else\n        {\n            // Deliver an OpenID form on all other URLs\n            res.writeHead(200);\n            res.end('<!DOCTYPE html><html><body>'\n                + '<form method=\"get\" action=\"/authenticate\">'\n                + '<p>Login using OpenID</p>'\n                + '<input name=\"openid_identifier\" />'\n                + '<input type=\"submit\" value=\"Login\" />'\n                + '</form></body></html>');\n        }\n    });\nserver.listen(80);\n```\n\nA more elaborate example including utilizing extensions can be found in `sample.js` in the GitHub repository.\n\n## Supported Extensions\nThis library comes with built-in support for the following OpenID extensions:\n\n - The Simple Registration (SREG) 1.1 extension is implemented as `openid.SimpleRegistration`\n - The Attribute Exchange (AX) 1.0 extension is implemented as `openid.AttributeExchange`\n - The OAuth 1.0 extension is implemented as `openid.OAuthHybrid`\n - The User Interface 1.0 extension is implemented as `openid.UserInterface`\n\n## Storing association state\n\nTo provide a way to save/load association state, you need to mix-in two functions in\nthe `openid` module:\n\n - `saveAssociation(provider, type, handle, secret, expiry_time_in_seconds, callback)` is called when a new association is established during authentication. The callback should be called with any error as its first argument (or `null` if no error occured).\n - `loadAssociation(handle, callback)` is used to retrieve the association identified by `handle` when verification happens. The callback should be called with any error as its first argument (and `null` as the second argument), or an object with the keys `provider`, `type`, `secret` if the association was loaded successfully.\n\nThe `openid` module includes default implementations for these functions using a simple object to store the associations in-memory.\n\n## Caching discovered information\n\nThe verification of a positive assertion (i.e. an authenticated user) can be sped up significantly by avoiding the need for additional provider discoveries when possible. In order to achieve, this speed-up, node-openid needs to cache its discovered providers. You can mix-in two functions to override the default cache, which is an in-memory cache utilizing a simple object store:\n  \n  - `saveDiscoveredInformation(key, provider, callback)` is used when saving a discovered provider.  The following behavior is required:\n    - The `key` parameter should be uses as a key for storing the provider - it will be used as the lookup key when loading the provider. (Currently, the key is either a claimed identifier or an OP-local identifier, depending on the OpenID context.)\n    - When saving fails for some reason, `callback(error)` is called with `error` being an error object specifying what failed.\n    - When saving succeeds, `callback(null)` is called.\n\n  - `loadDiscoveredInformation(key, callback)` is used to load any previously discovered information about the provider for an identifier. The following behavior is required:    \n      - When no provider is found for the identifier, `callback(null, null)` is called (i.e. it is not an error to not have any data to return).\n      - When loading fails for some reason, `callback(error, null)` is called with `error` being an error string specifying why loading failed.\n      - When loading succeeds, `callback(null, provider)` is called with the exact provider object that was previously stored using `saveDiscoveredInformation`.\n\n## License\n\nOpenID for node.js is licensed under the MIT license. See LICENSE for further details. \nThe libary includes bigint functionality released by Tom Wu under the BSD license, \nand Base64 functions released by Nick Galbreath under the MIT license. Please see \n`lib/bigint.js` and `lib/base64.js` for the details of the licenses for these functions.\n",
  "_id": "openid@0.4.2",
  "_from": "openid@>=0.2.0"
}
